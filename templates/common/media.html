{% macro gallery_item(media, class) %}
  {% if media.media_type == "image" %}
    <a
      href="{{ media.url_original }}"
      target="_blank"
      data-media--gallery-target="item"
      data-lg-size="{{ media.width_original }}-{{ media.height_original }}"
    >
      <img
        src="{{ media.url_thumbnail }}"
        alt="{{ media.caption }}"
        class="{{ class }}"
        width="{{ media.width_thumbnail }}"
        height="{{ media.height_thumbnail }}"
      />
    </a>
  {% else %}
    <!-- IMPORTANT: Set `data-src=""` here, otherwise lightGallery chokes. -->
    <a
      href="{{ media.url_original }}"
      data-src=""
      target="_blank"
      data-media--gallery-target="item"
      data-lg-size="{{ media.width_original }}-{{ media.height_original }}"
      data-video='{
        "source": [{"src":"{{ media.url_original }}"}],
        "attributes": {"preload": "metadata", "poster": "{{ media.url_thumbnail }}", "playsinline": true, "controls": true}
      }'
      class="video-indicator-wrapper"
    >
      <img
        src="{{ media.url_thumbnail }}"
        alt="{{ media.caption }}"
        class="{{ class }}"
        width="{{ media.width_thumbnail }}"
        height="{{ media.height_thumbnail }}"
      />
      <span class="video-indicator"></span>
    </a>
  {% endif %}
{% endmacro %}

{% macro standalone_item(media, class) %}
  {% if media.media_type == "image" %}
    <img
      src="{{ media.url_thumbnail }}"
      alt="{{ media.caption }}"
      class="{{ class }}"
      width="{{ media.width_thumbnail }}"
      height="{{ media.height_thumbnail }}"
    />
  {% else %}
    <video
      src="{{ media.url_original }}"
      poster="{{ media.url_thumbnail }}"
      preload="none"
      controls
      class="{{ class }}"
      width="{{ media.width_thumbnail }}"
      height="{{ media.height_thumbnail }}"
    />
  {% endif %}
{% endmacro %}
